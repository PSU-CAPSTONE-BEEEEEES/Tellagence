(function(h){function p(a){d.queue.push(a);d.blocking||q()}function q(){for(;d.queue.length&&!d.blocking;)d.queue.shift()()}function u(a){d.blocking=true;if(a)d.timeout=setTimeout(function(){QUnit.ok(false,"Test timed out");w()},a)}function w(){setTimeout(function(){d.timeout&&clearTimeout(d.timeout);d.blocking=false;q()},13)}function v(a){var g=d.filters.length,k=false;if(!g)return true;for(;g--;){var i=d.filters[g],l=i.charAt(0)=="!";if(l)i=i.slice(1);if(a.indexOf(i)!=-1)return!l;if(l)k=true}return k}
function b(){d.blocking=false;var a=+new Date;d.fixture=document.getElementById("main").innerHTML;d.ajaxSettings=h.ajaxSettings;p(function(){h('<p id="testresult" class="result"/>').html(["Tests completed in ",+new Date-a,' milliseconds.<br/><span class="bad">',d.stats.bad,'</span> tests of <span class="all">',d.stats.all,"</span> failed."].join("")).appendTo("body");h("#banner").addClass(d.stats.bad?"fail":"pass");QUnit.done(d.stats.bad,d.stats.all)})}function e(){s=[];if(D)for(var a in window)s.push(a)}
function m(){var a=s;e();if(s.length>a.length){z(false,"Introduced global variable(s): "+r(a,s).join(", "));d.expected++}}function r(a,g){return h.grep(g,function(k){return h.inArray(k,a)==-1})}function t(a,g){if(d.currentModule)a=d.currentModule+" module: "+a;var k=h.extend({setup:function(){},teardown:function(){}},d.moduleLifecycle);if(v(a)){p(function(){d.assertions=[];d.expected=null;try{s||e();k.setup()}catch(i){QUnit.ok(false,"Setup failed on "+a+": "+i.message)}});p(function(){try{g()}catch(i){if(typeof console!=
"undefined"&&console.error&&console.warn){console.error("Test "+a+" died, exception and test follows");console.error(i);console.warn(g.toString())}QUnit.ok(false,"Died on test #"+(d.assertions.length+1)+": "+i.message);e()}});p(function(){try{m();k.teardown()}catch(i){QUnit.ok(false,"Teardown failed on "+a+": "+i.message)}});p(function(){try{A()}catch(i){if(typeof console!="undefined"&&console.error&&console.warn){console.error("reset() failed, following Test "+a+", exception and reset fn follows");
console.error(i);console.warn(A.toString())}}d.expected&&d.expected!=d.assertions.length&&QUnit.ok(false,"Expected "+d.expected+" assertions, but "+d.assertions.length+" were run");var l=0,f=0,c=h("<ol/>").hide();d.stats.all+=d.assertions.length;for(var j=0;j<d.assertions.length;j++){var n=d.assertions[j];h("<li/>").addClass(n.result?"pass":"fail").text(n.message||"(no message)").appendTo(c);n.result?l++:f++}d.stats.bad+=f;l=h("<strong/>").html(a+" <b style='color:black;'>(<b class='fail'>"+f+"</b>, <b class='pass'>"+
l+"</b>, "+d.assertions.length+")</b>").click(function(){h(this).next().toggle()}).dblclick(function(o){o=h(o.target).filter("strong").clone();if(o.length){o.children().remove();location.href=location.href.match(/^(.+?)(\?.*)?$/)[1]+"?"+encodeURIComponent(h.trim(o.text()))}});h("<li/>").addClass(f?"fail":"pass").append(l).append(c).appendTo("#tests");if(f){h("#filter-pass").attr("disabled",null);h("#filter-missing").attr("disabled",null)}})}}function x(a,g){d.currentModule=a;d.moduleLifecycle=g}function y(a){d.expected=
a}function A(){h("#main").html(d.fixture);h.event.global={};h.ajaxSettings=h.extend({},d.ajaxSettings)}function z(a,g){QUnit.log(a,g);d.assertions.push({result:!!a,message:g})}function E(a,g,k){function i(c){var j=[];if(c&&c.length)for(var n=0;n<c.length;n++){var o=c[n].nodeName;if(o){o=o.toLowerCase();if(c[n].id)o+="#"+c[n].id}else o=c[n];j.push(o)}return"[ "+j.join(", ")+" ]"}var l=true;if(a&&g&&a.length!=undefined&&a.length==g.length)for(var f=0;f<a.length;f++){if(a[f]!=g[f])l=false}else l=false;
QUnit.ok(l,!l?k+" expected: "+i(g)+" result: "+i(a):k)}function K(a,g,k){var i=true;if(a&&g){for(var l in a)if(a[l]!=g[l])i=false;for(l in g)if(a[l]!=g[l])i=false}else i=false;QUnit.ok(i,k)}function B(){for(var a=[],g=0;g<arguments.length;g++)a.push(document.getElementById(arguments[g]));return a}function L(a,g,k){for(var i=h(g),l="",f=0;f<i.length;f++)l+=(l&&",")+'"'+i[f].id+'"';E(i,B.apply(B,k),a+" ("+g+")")}function M(a){return a+(/\?/.test(a)?"&":"?")+(new Date).getTime()+""+parseInt(Math.random()*
1E5)}function N(a,g,k){F(g==a,a,g,k)}function F(a,g,k,i){i=i||(a?"okay":"failed");QUnit.ok(a,a?i+": "+k:i+", expected: "+jsDump.parse(k)+" result: "+jsDump.parse(g))}function O(a,g,k){if(h.browser.mozilla||h.browser.opera){k=document.createEvent("MouseEvents");k.initMouseEvent(g,true,true,a.ownerDocument.defaultView,0,0,0,0,0,false,false,false,false,0,null);a.dispatchEvent(k)}else h.browser.msie&&a.fireEvent("on"+g)}var I=function(){function a(f){if(typeof f==="string")return"string";else if(typeof f===
"boolean")return"boolean";else if(typeof f==="number")return isNaN(f)?"nan":"number";else if(typeof f==="undefined")return"undefined";else if(f===null)return"null";else if(f instanceof Array)return"array";else if(f instanceof Date)return"date";else if(f instanceof RegExp)return"regexp";else if(typeof f==="object")return"object";else if(f instanceof Function)return"function"}function g(f,c,j){if(f=a(f))return a(c[f])==="function"?c[f].apply(c,j):c[f]}var k,i=[],l=function(){function f(c,j){return j===
c}return{string:f,"boolean":f,number:f,"null":f,undefined:f,nan:function(c){return isNaN(c)},date:function(c,j){return a(c)==="date"&&j.valueOf()===c.valueOf()},regexp:function(c,j){return a(c)==="regexp"&&j.source===c.source&&j.global===c.global&&j.ignoreCase===c.ignoreCase&&j.multiline===c.multiline},"function":function(){var c=i[i.length-1];return c!==Object&&typeof c!=="undefined"},array:function(c,j){var n,o;if(a(c)!=="array")return false;o=j.length;if(o!==c.length)return false;for(n=0;n<o;n++)if(!k(j[n],
c[n]))return false;return true},object:function(c,j){var n,o=true,G=[],H=[];if(j.constructor!==c.constructor)return false;i.push(j.constructor);for(n in j){G.push(n);k(j[n],c[n])||(o=false)}i.pop();for(n in c)H.push(n);return o&&k(G.sort(),H.sort())}}}();return k=function(){var f=Array.prototype.slice.apply(arguments);if(f.length<2)return true;return function(c,j){return c===j?true:typeof c!==typeof j||c===null||j===null||typeof c==="undefined"||typeof j==="undefined"?false:g(c,l,[j,c])}(f[0],f[1])&&
arguments.callee.apply(this,f.splice(1,f.length-1))}}(),C=h.map(location.search.slice(1).split("&"),decodeURIComponent),J=h.inArray("noglobals",C),D=J!==-1;D&&C.splice(J,1);var d={stats:{all:0,bad:0},queue:[],blocking:true,filters:C,isLocal:window.location.protocol=="file:"};h.extend(window,{test:t,module:x,expect:y,ok:z,equals:N,start:w,stop:u,reset:A,isLocal:d.isLocal,same:function(a,g,k){F(I(a,g),a,g,k)},QUnit:{equiv:I,ok:z,done:function(){},log:function(){}},isSet:E,isObj:K,compare:function(){throw"compare is deprecated - use same() instead";
},compare2:function(){throw"compare2 is deprecated - use same() instead";},serialArray:function(){throw"serialArray is deprecated - use jsDump.parse() instead";},q:B,t:L,url:M,triggerEvent:O});h(window).load(function(){h("#userAgent").html(navigator.userAgent);var a=h('<div class="testrunner-toolbar"><label for="filter-pass">Hide passed tests</label></div>').insertAfter("#userAgent");h('<input type="checkbox" id="filter-pass" />').attr("disabled",true).prependTo(a).click(function(){h("li.pass")[this.checked?
"hide":"show"]()});h('<input type="checkbox" id="filter-missing">').attr("disabled",true).appendTo(a).click(function(){h("li.fail:contains('missing test - untested code is broken code')").parent("ol").parent("li.fail")[this.checked?"hide":"show"]()});h("#filter-missing").after('<label for="filter-missing">Hide missing tests (untested code is broken code)</label>');b()});var s})(jQuery);
(function(){function h(b){return'"'+b.toString().replace(/"/g,'\\"')+'"'}function p(b){return b+""}function q(b,e,m){var r=v.separator(),t=v.indent();inner=v.indent(1);if(e.join)e=e.join(","+r+inner);if(!e)return b+m;return[b,inner+e,t+m].join(r)}function u(b){var e=b.length,m=Array(e);for(this.up();e--;)m[e]=this.parse(b[e]);this.down();return q("[",m,"]")}var w=/^function (\w+)/,v=window.jsDump={parse:function(b,e){var m=this.parsers[e||this.typeOf(b)];e=typeof m;return e=="function"?m.call(this,
b):e=="string"?m:this.parsers.error},typeOf:function(b){var e=typeof b,m="function";return e!="object"&&e!=m?e:!b?"null":b.exec?"regexp":b.getHours?"date":b.scrollBy?"window":b.nodeName=="#document"?"document":b.nodeName?"node":b.item?"nodelist":b.callee?"arguments":b.call||b.constructor!=Array&&(b+"").indexOf(m)!=-1?m:"length"in b?"array":e},separator:function(){return this.multiline?this.HTML?"<br />":"\n":this.HTML?"&nbsp;":" "},indent:function(b){if(!this.multiline)return"";var e=this.indentChar;
if(this.HTML)e=e.replace(/\t/g,"   ").replace(/ /g,"&nbsp;");return Array(this._depth_+(b||0)).join(e)},up:function(b){this._depth_+=b||1},down:function(b){this._depth_-=b||1},setParser:function(b,e){this.parsers[b]=e},quote:h,literal:p,join:q,_depth_:1,parsers:{window:"[Window]",document:"[Document]",error:"[ERROR]",unknown:"[Unknown]","null":"null",undefined:"undefined","function":function(b){var e="function",m="name"in b?b.name:(w.exec(b)||[])[1];if(m)e+=" "+m;e+="(";e=[e,this.parse(b,"functionArgs"),
"){"].join("");return q(e,this.parse(b,"functionCode"),"}")},array:u,nodelist:u,arguments:u,object:function(b){var e=[];this.up();for(var m in b)e.push(this.parse(m,"key")+": "+this.parse(b[m]));this.down();return q("{",e,"}")},node:function(b){var e=this.HTML?"&lt;":"<",m=this.HTML?"&gt;":">",r=b.nodeName.toLowerCase(),t=e+r;for(var x in this.DOMAttrs){var y=b[this.DOMAttrs[x]];if(y)t+=" "+x+"="+this.parse(y,"attribute")}return t+m+e+"/"+r+m},functionArgs:function(b){b=b.length;if(!b)return"";for(var e=
Array(b);b--;)e[b]=String.fromCharCode(97+b);return" "+e.join(", ")+" "},key:h,functionCode:"[code]",attribute:h,string:h,date:h,regexp:p,number:p,"boolean":p},DOMAttrs:{id:"id",name:"name","class":"className"},HTML:false,indentChar:"   ",multiline:true}})();

